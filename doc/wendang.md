# Ship Fast TypeScript + Supabase 项目文档

## 项目概述

YCamie 是一个基于 Next.js 14、TypeScript 和 Supabase 构建的现代化全栈应用。这是一个创新的 AI 驱动的桌面宠物（Shimeji）生成平台，旨在为用户提供个性化的桌面伴侣体验。

## 项目定位与服务人群

### 目标用户群
- AI虚拟陪伴需求者
- 动漫爱好者和收藏家
- 需要个性化桌面体验的用户
- 寻求数字伴侣的远程工作者
- 内容创作者和设计师
- 游戏玩家和数字艺术爱好者

### 解决的问题
1. 传统 Shimeji 创建过程复杂且耗时
2. 缺乏个性化和定制选项
3. 技术门槛高，对普通用户不友好
4. 安装和配置过程繁琐（需要安装配置等）

## 核心功能

### 1. AI 驱动的 Shimeji 生成
- 基于用户输入自动生成桌面宠物
- 支持图片参考和文本描述
- 多版本选择动画帧生成（基础版和高级版）
- AI虚拟对话, 满足你的陪伴需求(支持设置人物属性)
- shimeji提供打开用户桌面应用的功能
- 用户可以通过对话来让shimeji进行一些行为，例如朝着你的鼠标走过来
- 傻瓜式安装

### 2. 用户友好的界面
- 简化的生成流程
- 清晰的操作指引

### 3. 便捷的安装系统
- 一键下载打包
- 集成运行环境
- 自动配置

## 产品特点与优势

### 技术创新
1. **AI 技术集成**
   - 先进的图像生成算法
   - 智能动画处理

2. **用户体验优化**
   - 简化的操作流程
   - 直观的界面设计
   - 快速响应系统

3. **性能与兼容性**
   - 优化的资源占用
   - 多显示器支持
   - 广泛的系统兼容性

### 产品优势

1. **便捷性**
   - 无需编程知识
   - 无需绘画知识
   - 快速生成过程
   - 简单的安装步骤
   - 一站式解决方案

2. **个性化**
   - 自定义角色创建
   - 灵活的配置选项
   - 多样化的动画效果
   - 个性化行为设置

3. **专业支持**
   - 详细的使用指南
   - 技术支持服务
   - 定期更新维护
   - 社区互助平台

4. **性价比**
   - 合理的定价策略
   - 多种套餐选择
   - 优质的服务体验
   - 持续的功能更新

## 应用场景

1. **工作环境**
   - 为远程办公增添趣味
   - 提供虚拟陪伴
   - 减轻工作压力
   - 提供互动休息时间
   - 个性化工作空间

2. **娱乐使用**
   - 个性化桌面装饰
   - 互动娱乐体验
   - 收藏与展示

3. **创作平台**
   - 角色原创设计
   - 动画效果制作
   - 作品展示与分享
   - 社区互动交流

### 主要界面

1. comfy 界面
```
    1. 输入 
        prompt输入 , 参考图片输入
        - prompt输入限制：不超过1000个字符
        - 参考图片大小限制：不超过1MB
        - 注意：用户的总输入（包括文本和图片）不能超过1MB
    2. 输出
        可供下载的用户包
    3. 时间花费1min 到1.5 min 不等
```

2. 历史记录模块
```
    可以查看用户最近生成的前50个图像，并且支持预览和下载
```

3. 支付模块
```
    1. 集成stripe模块
```

4. 用户模块
```
    1. 支持邮箱/密码登录（使用supabase）
    2. 支持第三方登录（google）
```

5. 消息队列
```
    1. 使用upstash 实现消息队列
```

6. comfyui 模块
```
    1. 使用comfyui 实现图片生成 , 作为后端
    2. cpu平台使用 modal平台
```

### 目前缺陷

1. 图片生成速度较慢
2. 图片生成种类单一
3. 在复杂场景生成质量差
4. AI对话支持平台少，没有包含apikey
5. modal平台使用需要付费
6. 没有语音对话功能

## 技术栈

### 前端
- **Next.js 14**: React 框架，用于构建服务端渲染和静态网站
- **TypeScript**: 提供类型安全和更好的开发体验
- **Tailwind CSS**: 用于快速构建响应式界面
- **DaisyUI**: Tailwind CSS 组件库
- **React Hot Toast**: 提供优雅的通知提示
- **Headless UI**: 无样式的可访问性组件
- **Radix UI**: 提供低级别的无样式 UI 组件

### 后端
- **Supabase**: 开源的 Firebase 替代品，提供数据库、认证等服务
- **AWS S3**: 用于文件存储
- **Stripe**: 支付处理
- **Resend**: 邮件发送服务

### 开发工具
- **ESLint**: 代码质量检查
- **Prettier**: 代码格式化
- **Next-Sitemap**: 自动生成站点地图

## 项目结构

```
├── app/                  # Next.js 应用主目录
│   ├── api/             # API 路由
│   ├── dashboard/       # 仪表板页面
│   ├── user-profile/    # 用户档案页面
│   └── ...
├── components/          # 可重用组件
├── hooks/              # 自定义 React Hooks
├── lib/                # 工具函数和配置
├── public/             # 静态资源
├── types/              # TypeScript 类型定义
└── config.ts           # 全局配置文件
```

## 主要功能

1. **用户认证**
   - 基于 Supabase 的身份认证
   - 支持邮箱/密码登录
   - 社交媒体登录集成

2. **仪表板功能**
   - 用户数据管理
   - 个人资料设置
   - 活动监控

3. **文件管理**
   - AWS S3 集成
   - 文件上传/下载
   - 图片处理

4. **支付系统**
   - Stripe 支付集成
   - 订阅管理
   - 发票生成

## 环境配置

项目需要以下环境变量（在 `.env.local` 文件中配置）：

```
NEXT_PUBLIC_SUPABASE_URL=你的_SUPABASE_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=你的_SUPABASE_ANON_KEY
STRIPE_SECRET_KEY=你的_STRIPE_SECRET_KEY
AWS_ACCESS_KEY_ID=你的_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=你的_AWS_SECRET_KEY
```

## 开发指南

1. **安装依赖**
   ```bash
   pnpm install
   ```

2. **运行开发服务器**
   ```bash
   pnpm dev
   ```

3. **构建生产版本**
   ```bash
   pnpm build
   ```

4. **运行生产服务器**
   ```bash
   pnpm start
   ```

## 部署

项目支持多种部署方式：

1. **Vercel 部署**
   - 直接连接 GitHub 仓库
   - 自动部署和预览

2. **自托管**
   - 支持 Docker 容器化
   - 可部署到任何支持 Node.js 的服务器

## 性能优化

1. **图片优化**
   - 使用 Next.js 图片组件
   - 自动图片优化和缓存

2. **API 优化**
   - API 路由缓存
   - 边缘函数支持

3. **SEO 优化**
   - 自动生成站点地图
   - Meta 标签管理

## 安全性

1. **认证安全**
   - JWT 令牌管理
   - 密码加密存储

2. **数据安全**
   - HTTPS 加密
   - SQL 注入防护
   - XSS 防护

## 贡献指南

1. Fork 项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 问题反馈

如果你发现任何问题或有改进建议，请创建 Issue 或直接联系维护团队。

## 许可证

本项目采用 MIT 许可证。详见 LICENSE 文件。