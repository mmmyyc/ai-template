# Next.js Internationalization (i18n) Implementation Guide

## Current Status
The project currently has Chinese text that needs to be internationalized in several components:
- Header
- Hero
- Problem
- FeaturesListicle
- CTA
- Footer

## Implementation Plan

### 1. Install Dependencies
```bash
npm install next-intl
```

### 2. Configure Next.js
Create `middleware.ts` in the root:
```typescript
import createMiddleware from 'next-intl/middleware';
 
export default createMiddleware({
  locales: ['en', 'zh'],
  defaultLocale: 'en'
});
 
export const config = {
  matcher: ['/((?!api|_next|_vercel|.*\\..*).*)']
};
```

Update `next.config.js`:
```javascript
const withNextIntl = require('next-intl/plugin')();

module.exports = withNextIntl({
  // other config
});
```

### 3. Directory Structure
```
├── app
│   ├── [locale]
│   │   ├── layout.tsx
│   │   ├── page.tsx
│   │   └── ...
├── messages
│   ├── en.json
│   ├── zh.json
│   └── ...
├── config
│   └── i18n.ts
└── components
    └── LanguageSwitcher.tsx
```

### 4. Translation Files
Create `messages/en.json` and `messages/zh.json`:

`messages/en.json`:
```json
{
  "header": {
    "features": "Features",
    "petStore": "Pet Store",
    "documentation": "Documentation",
    "community": "Community",
    "downloadClient": "Download Client",
    "openMenu": "Open Menu",
    "closeMenu": "Close Menu"
  },
  "hero": {
    "title": "Meet your desktop companion",
    "tryNow": "Try Now",
    "watchDemo": "Watch Demo",
    "fullyCustomizable": "Fully Customizable",
    "highQuality": "High Quality"
  },
  "problem": {
    "title": "Loneliness in the Digital Age is Affecting Our Work and Life",
    "coldDigitalWorld": "Cold Digital World",
    "workBurnout": "Work Burnout",
    "decreasedProductivity": "Decreased Productivity",
    "stats": {
      "remoteWork": "76% of people feel lonely when working remotely",
      "enjoyableEnv": "52% want a more enjoyable work environment",
      "efficiency": "89% believe a happy work environment boosts efficiency"
    }
  }
}
```

`messages/zh.json`:
```json
{
  "header": {
    "features": "特性",
    "petStore": "宠物商店",
    "documentation": "使用文档",
    "community": "社区",
    "downloadClient": "下载客户端",
    "openMenu": "打开菜单",
    "closeMenu": "关闭菜单"
  },
  "hero": {
    "title": "遇见您的桌面好伙伴",
    "tryNow": "立即体验",
    "watchDemo": "观看演示",
    "fullyCustomizable": "完全定制化",
    "highQuality": "超高质量"
  },
  "problem": {
    "title": "数字时代的孤独感正在影响我们的工作和生活",
    "coldDigitalWorld": "冰冷的数字世界",
    "workBurnout": "工作倦怠",
    "decreasedProductivity": "效率与创造力下降",
    "stats": {
      "remoteWork": "76% 的人在远程工作时感到孤独",
      "enjoyableEnv": "52% 的人希望工作环境更有趣味性",
      "efficiency": "89% 的人认为快乐的工作环境能提升效率"
    }
  }
}
```

### 5. Component Migration Example
Before:
```tsx
export function Header() {
  return (
    <nav>
      <Link href="/features">特性</Link>
      <Link href="/store">宠物商店</Link>
    </nav>
  );
}
```

After:
```tsx
import { useTranslations } from 'next-intl';

export function Header() {
  const t = useTranslations('header');
  
  return (
    <nav>
      <Link href="/features">{t('features')}</Link>
      <Link href="/store">{t('petStore')}</Link>
    </nav>
  );
}
```

### 6. Language Switcher Component
```tsx
'use client';

import { useLocale } from 'next-intl';
import { usePathname, useRouter } from 'next-intl/client';

export function LanguageSwitcher() {
  const locale = useLocale();
  const router = useRouter();
  const pathname = usePathname();

  const switchLocale = (newLocale: string) => {
    router.replace(pathname, { locale: newLocale });
  };

  return (
    <div className="dropdown dropdown-end">
      <label tabIndex={0} className="btn btn-ghost btn-sm">
        {locale === 'en' ? 'English' : '中文'}
      </label>
      <ul className="dropdown-content menu p-2 shadow bg-base-100 rounded-box">
        <li><button onClick={() => switchLocale('en')}>English</button></li>
        <li><button onClick={() => switchLocale('zh')}>中文</button></li>
      </ul>
    </div>
  );
}
```

### 7. Migration Steps

1. **Setup Infrastructure**
   - Install dependencies
   - Configure Next.js
   - Create directory structure
   - Add language switcher

2. **Create Translation Files**
   - Extract all text from components
   - Create translation files
   - Organize translations by component/feature

3. **Update Components**
   - Import useTranslations hook
   - Replace hardcoded text with translation keys
   - Add proper typing support

4. **Testing**
   - Test language switching
   - Verify all translations
   - Check fallback behavior

### 8. SEO Considerations

Update `layout.tsx`:
```tsx
import { useLocale } from 'next-intl';

export function generateMetadata({ params: { locale } }) {
  return {
    title: locale === 'en' ? 'Desktop Pet' : '桌面宠物',
    description: locale === 'en' 
      ? 'Your AI-powered desktop companion'
      : '您的AI桌面伙伴',
  };
}
```

### 9. Best Practices

1. **Key Organization**
   - Use nested structures for better organization
   - Group related translations
   - Follow consistent naming conventions

2. **Dynamic Content**
   - Use parameters for dynamic text: `t('welcome', { name })`
   - Handle pluralization properly
   - Format dates and numbers according to locale

3. **Performance**
   - Use static generation where possible
   - Implement proper caching strategies
   - Lazy load translations for better initial load time

4. **Maintenance**
   - Keep translation files in sync
   - Document special formatting requirements
   - Regular review of translations

### 10. Future Improvements

1. **Automation**
   - Add translation extraction tools
   - Implement missing translation checks
   - Add type generation for translations

2. **User Experience**
   - Add language detection
   - Remember user's language preference
   - Improve language switcher UI

3. **Content**
   - Add more languages
   - Improve translation quality
   - Add region-specific variations